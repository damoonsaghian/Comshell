
<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Comshell
</title>

<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet'>
<style>
  body {
    padding: 1em;
    margin: 0;
    font-family: 'Source Code Pro', monospace;
    font-size: 1em;
    max-width: 50em;
    white-space: pre-wrap
  }
  div {
    margin-left: 1em;
    text-indent: -1em;
  }
</style>

</head>

<body>
<h1>Comshell
</h1>
<a href='https://github.com/damoonsaghian/Comshell
'>https://github.com/damoonsaghian/Comshell
</a>
<h2>1, command based user interface</h2><div>command based user interfaces (using keyboard, voice, gesture) are faster more convenient and more powerful than pointing based user interfaces (using mouse, touch, pen).</div><div>pointing interfaces can be useful only for very simple tasks. also for some special artistic applications pen input remains the only choice.</div><div><p></p></div><div><img src='keyboard.png' alt='keyboard.png'/></div><div>, two commas --&gt; .</div><div>, comma followed by ' --&gt; "</div><div>, comma followed by ( --&gt; [</div><div>, comma followed by add followed by comma --&gt; +</div><div>, comma followed by add followed by space --&gt; + followed by space</div><div>, comma followed by psi followed by space --&gt; ?</div><div>, two apostrophies followed by a --&gt; A</div><div><p></p></div><div>Vim'like key'bindings</div><div>modes (like normal mode and insert mode) must be visually distinctive.</div><div>pressing "esc" key always take you back to normal mode.</div><div>in normal mode we can:</div><div>, create a new project or chapter</div><div>, show projects or chapter, move between them (previous, next), and then press space to open or raise them, or directly go to them by entering their number</div><div>, move the cursor to the next or previous (or by entering the number directly to) words, lines (or table cells), paragraphs, pages</div><div>, start and end selection, then copy or cut</div><div>, paste</div><div>, undo, redo</div><div>, find</div><div>, enter insert mode</div><div><p></p></div><div>command based interactions are much simpler for a speech recognition engine to process, since it needs to match against a relatively small set of commands, unlike a general speech to text process.</div><div>a headset with near range microphone can be used, to exclude far away sound sources. also it is better to put battery and bluetooth of the headset in a separate unit, that can be put in the pocket. this makes the headset lighter and safer.</div><div>for those that neither can use all their fingers, nor can talk, gesture based interface can be implemented.</div><div><p></p></div><div>Comshell is a command based user interface, being developed using Rust ecosystem.</div>
<h2>2, graphics</h2><div>scene'graph based graphics</div><div>objects in the scene'graph can be created directly using a library a'p'i, or created in a textual format and then sent to an engine which creates the actual objects.</div><div>since there is no sophisticated scene'graph based graphics library for Rust yet, and since writing bindings for existing c/c++ libraries which all have run'time memory management, and class based inheritence, generally ruin Rust's (elegant) ownership system, and traits, i think the engine approach is easier, at least for now.</div><div>of course we loose type safty, and it may be slower. but when there is a sophisticated scene'graph graphics library in Rust, we can imidiately switch to it using a serializer/deserializer, and then gradually migrate from the textual interface, to using the direct graphics a'p'i.</div><div><p></p></div><div>CEF (Chromium embedded framework) is complicated (as a result of supporting all web technologies, multiple processes, ...). also i think html+css is not really well designed for generic graphics.</div><div><p></p></div><div>QtQuick has a good modular implementation for almost all platforms. also there is a Rust binding to control QML engine.</div><div><a href='http://doc.qt.io/qt-5/qtqml-javascript-dynamicobjectcreation.html'>http://doc.qt.io/qt-5/qtqml-javascript-dynamicobjectcreation.html</a></div><div><a href='http://doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html'>http://doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html</a></div><div><a href='https://developer.ubuntu.com/api/qml/sdk-14.10/QtQml.qtqml-cppintegration-interactqmlfromcpp/'>https://developer.ubuntu.com/api/qml/sdk-14.10/QtQml.qtqml-cppintegration-interactqmlfromcpp/</a></div><div><a href='https://www.wisol.ch/w/articles/2014-12-15-qt-signal-slots-qml-cpp/'>https://www.wisol.ch/w/articles/2014-12-15-qt-signal-slots-qml-cpp/</a></div><div><p></p></div><div><a href='https://white-oak.github.io/qml-rust/qml/'>https://white-oak.github.io/qml-rust/qml/</a></div><div><a href='https://github.com/White-Oak/qml-rust/tree/master/examples'>https://github.com/White-Oak/qml-rust/tree/master/examples</a></div><div><p></p></div><div>a small script, inside QML engine, receives textual input (which is set using QmlEngine::set_property), and then creates and manipulates graphical objects, based on the currently selected object.</div><div><p></p></div><div>script in the engine:</div><div>  current object</div><div>  Qt.createQmlObject()</div><div>the textual input is given to the engine using:</div><div>  QmlEngine::set_property(name, value)</div><div>"value" is a string containing the QML description of the data to be added, and the transformation.</div><div><p></p></div><div>last object: loaded objects from file are added after the last object.</div><div>selected object: manipulated by user.</div><div>input message:</div><div>, a new object or none (meaning the selected object)</div><div>, transfomation</div><div><p></p></div><div>for Windows:</div><div>  install MSYS2, then install: qt5, qtwebkit, cmake, gcc.</div><div>  put mingw64 bin dir in system path.</div><div>  set QTDIR to "c:\msys64\mingw64" in system environment variables.</div>
<h2>minimal system</h2><div>use Arch Linux to setup a minimal operating system (without a windowing system).</div><div>boot to an existing Arch Linux (installed or live) then:</div><div>  timedatectl set-ntp true</div><div>  prepare the disk (use lsblk to identify the block devices), and mount it:</div><div>    mkfs.btrfs -f /dev/sdx</div><div>    mount /dev/sdx /mnt</div><div>  pacstrap /mnt grub sed intel-ucode linux systemd-sysvcompat btrfs-progs dhcpcd pacman nano man-db logrotate</div><div>  arch-chroot /mnt</div><div>  bootloader:</div><div>    grub-install --target=i386-pc /dev/sdx</div><div>    grub-mkconfig -o /boot/grub/grub.cfg</div><div>  systemctl enable dhcpcd.service; timedatectl set-ntp true</div><div>  automatic login:</div><div>    systemctl edit getty@tty1</div><div>      [Service]</div><div>      ExecStart=</div><div>      ExecStart=-/usr/bin/agetty --autologin root --noclear %I $TERM</div><div>  exit; reboot</div><div><p></p></div><div>use btrfs, because journaling file systems can only protect metadata at an acceptable performance, since they need to write all file system operations twice, once to the journal, and once to the file system</div><div>copy'on'write provides consistency for both data and metadata</div><div>also, it can offer integrity of data and metadata (using checksums), at an acceptable overhead.</div><div>in addition, c'o'w also supports the creation of cheap snapshots and clones (because it does not overwrite data in place). users can take fast online backups without the need to use any special software technique like l'v'm.</div><div><p></p></div><div>qt5-declarative qt5-webkit qt5-3d qt5-multimedia</div><div>qml-module-qtquick-controls2 qml-module-qtquick-controls</div><div>cmake gcc pkgconfig rust</div><div><p></p></div><div>go to Comshell/cargo dir and:</div><div>  cargo build --release</div><div>  sudo cp .cache/release/comshell /comshell/comshell</div><div>  cp -R ../.data /comshell/</div><div>add this line to "~/.bash_profile":</div><div>  exec /comshell/comshell</div><div><p></p></div><div>Comshell looks for projects in "~/projects/" and "/projects/".</div><div>a shared project directory can be created like this:</div><div>  mkdir /projects; chmod a+w /projects</div>
<h2>useful libs</h2><div>text editing:</div><div><a href='https://github.com/jmacdonald/scribe'>https://github.com/jmacdonald/scribe</a></div><div><a href='https://github.com/mathall/rim'>https://github.com/mathall/rim</a></div><div><a href='https://github.com/gchp/iota'>https://github.com/gchp/iota</a></div><div><a href='https://github.com/zovt/tea'>https://github.com/zovt/tea</a></div><div><p></p></div><div>web:</div><div><a href='https://github.com/servo/rust-url/'>https://github.com/servo/rust-url/</a></div><div><a href='https://crates.io/crates/hyper'>https://crates.io/crates/hyper</a></div><div>  <a href='https://crates.io/crates/hyper-rustls'>https://crates.io/crates/hyper-rustls</a></div><div>  <a href='https://crates.io/crates/reqwest'>https://crates.io/crates/reqwest</a></div><div>  <a href='https://crates.io/crates/simplist'>https://crates.io/crates/simplist</a></div><div><a href='https://crates.io/crates/httpbin'>https://crates.io/crates/httpbin</a></div><div><a href='https://crates.io/crates/httpbis'>https://crates.io/crates/httpbis</a></div><div><a href='https://crates.io/crates/xmpp-proto'>https://crates.io/crates/xmpp-proto</a></div><div><a href='https://crates.io/crates/pijul'>https://crates.io/crates/pijul</a> (version control system)</div><div><a href='https://crates.io/crates/github-rs'>https://crates.io/crates/github-rs</a></div><div><p></p></div><div>media:</div><div><a href='http://www.qtav.org/install.html'>http://www.qtav.org/install.html</a></div><div><a href='https://trac.ffmpeg.org/wiki/HWAccelIntro'>https://trac.ffmpeg.org/wiki/HWAccelIntro</a></div><div><a href='https://crates.io/crates/mpv'>https://crates.io/crates/mpv</a></div><div><a href='https://github.com/pcwalton/rust-media'>https://github.com/pcwalton/rust-media</a></div><div><a href='https://github.com/tomaka/rodio'>https://github.com/tomaka/rodio</a></div><div><a href='https://github.com/tomaka/cpal'>https://github.com/tomaka/cpal</a></div><div><a href='https://crates.io/crates/lewton'>https://crates.io/crates/lewton</a></div><div><a href='https://crates.io/crates/camera_capture'>https://crates.io/crates/camera_capture</a></div><div><p></p></div><div><a href='http://blog.qt.io/blog/2017/01/30/new-qtpdf-qtlabs-module/'>http://blog.qt.io/blog/2017/01/30/new-qtpdf-qtlabs-module/</a></div></body></html>