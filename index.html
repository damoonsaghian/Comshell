
  <!DOCTYPE html>
  <html>
  <head>
  <meta charset='utf-8'>
  <title>Comshell</title>
  
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>
  <style>
    body {
      padding: 2px;
      margin: 0;
      font-family: Hack;
      font-size: 11ppt;
      color: #222222;
      white-space: pre;
    }
  </style>
  </head><body><h1>Comshell</h1>
<h2>1, command based UI</h2><div>command based user interfaces (using keyboard, voice, gesture) are</div><div>  faster, more convenient and more powerful</div><div>  than pointing based user interfaces (using mouse, touch, pen);</div><div><p></p></div><div>although touch interfaces can still be useful in simple limited applications;</div><div>  also for some special artistic applications, pen input remains the only choice;</div><div>touch interface may seem very convenient at first sight,</div><div>  especially if accompanied with the power of gestures;</div><div>but the problem is the form_factor:</div><div> since interaction at a distance is not possible, one must always carry the whole system;</div><div><p></p></div><div>detection of voice commands is a relatively simple process (compared to general speech recognition),</div><div>  because we only need to match against a relatively small set of commands;</div><div>a headset with near range microphone can be used, to exclude far away sound sources;</div><div>  also it is better to put battery and bluetooth of the headset in a separate unit,</div><div>    that can be put in the pocket;</div><div>  this makes the headset lighter and safer;</div><div>for those who neither can use all their fingers, nor can talk,</div><div>  gesture based (2d) input can be implemented;</div><div><p></p></div><div><img src='keyboard.png' alt='keyboard.png'/></div><div>missing characters can be entered like this:</div><div>, two commas --&gt; ;</div><div>, ";" followed by comma --&gt; .</div><div>, ";" followed by "c" --&gt; :</div><div>, ";" folloed by "n" --&gt; ::</div><div>, comma followed by "add" followed by comma --&gt; +</div><div>, comma followed by "add" followed by space --&gt; + followed by space</div><div>, comma followed by "psi" followed by space --&gt; ψ followed by space</div><div>, __a --&gt; A</div><div>, ab_cd__ followed by space --&gt; AB_CD followed by space</div><div><a href='https://github.com/adereth/dactyl-keyboard'>https://github.com/adereth/dactyl-keyboard</a></div><div><a href='https://ergodox-ez.com/pages/change-it-yourself'>https://ergodox-ez.com/pages/change-it-yourself</a></div><div><a href='https://shop.keyboard.io/'>https://shop.keyboard.io/</a></div><div>Kinesis Advantage 2 keyboard</div><div><a href='https://github.com/nicinabox/lets-split-guide'>https://github.com/nicinabox/lets-split-guide</a></div><div><a href='http://www.allthingsergo.com/the-best-ergonomic-mechanical-keyboards/'>http://www.allthingsergo.com/the-best-ergonomic-mechanical-keyboards/</a></div><div><p></p></div><div><b>Comshell</b></div><div>Comshell is a command based user interface, to be developed in Rust;</div><div><p></p></div><div>projects are looked for in "~/workspaces/*/", and all "workspaces/*/" directories on all disks,</div><div>  and shown in lists side by side (one list per workspace);</div><div>from these lists, we can open projects (or switch to them if they are already open),</div><div>  create new projects, etc;</div><div><p></p></div><div>a panel at the left shows the files in the project;</div><div>text files are opened in a text editor panel at the right;</div><div>directories with ".m" extension are opened in a panel at the right,</div><div>  showing thumbnails of the files in it;</div><div>in the left panel, we can move between files, and copy/rename/delete/create them;</div><div><p></p></div><div>non_local projects, web pages, pdf documents, etc,</div><div>  can be opened and accessed from links inside the main project;</div><div><p></p></div><div>scroll by paragraph: scroll to reveal the whole paragraph;</div><div><p></p></div><div>modal key_bindings;</div><div>modes (like normal mode and insert mode) must be visually distinctive;</div><div>press escape to go back to normal mode;</div><div>in normal mode we can:</div><div>, move the cursor to the next or previous characters or words</div><div>, move the cursor to the next or previous</div><div>  (or by entering the number directly to) lines (or table cells)</div><div>, move the cursor to the next or previous paragraphs</div><div>, start and end selection, then copy or cut</div><div>, paste</div><div>, undo, redo</div><div>, find</div><div>, enter insert mode</div>
<h2>2, programming</h2><div><b>computers</b></div><div>cpu, memory, peripherals,</div><div>  this seems to be the only practical architecture for the hardware of computers;</div><div>cpu runs a sequence of simple computations called instructions (packages of 0 and 1),</div><div>  one by one;</div><div><p></p></div><div>compilers are special programs that obtain computer instructions</div><div>  from a program written in a language which is structured and human readable;</div><div>  this way the written program will be portable to different computer architectures;</div><div>Rust is a programming language which provides zero cost abstractions,</div><div>  and memory safety without garbage collection;</div><div>  thus there is absolutely no reason to write new software in C/C++;</div><div><p></p></div><div>programs usually do not run directly on computer hardware;</div><div>instead they run on a more sophisticated software machine (a virtual machine) called the kernel;</div><div>in theory we can live without a kernel (an idea sometimes called a library operating system);</div><div>but in that case, we have to rewrite all the required libraries, on bare metal;</div><div>in addition since  we can't have more than one program,</div><div>  to develop and test new programs on such a system, we need hot_pluggable libraries;</div><div>  <a href='https://github.com/draivin/rust-hotswap'>https://github.com/draivin/rust-hotswap</a></div><div><p></p></div><div>Linux is a highly developed, constantly evolving, open_source kernel;</div><div><a href='https://dominuscarnufex.github.io/cours/rs-kernel/en.html'>https://dominuscarnufex.github.io/cours/rs-kernel/en.html</a></div><div>in Linux (and other Unix based operating systems) most things appear in the file system;</div><div>  i think the reason is to make it possible to do a lot of things using shell scripts</div><div>    instead of a proper programming language;</div><div>  while i can understand the convenience it provides, i don't think it's good design;</div><div><p></p></div><div><b>Rust</b></div><div>Rust makes bad programming hard, and good programming fun;</div><div>Rust does not hide (inherent) complexity, in fact it bolds it, so we can see it, and avoid it;</div><div>by inherent complexity i mean a complexity which can not be abstracted away completely;</div><div>  ie if we attempt to hide it, it will re_emerge somewhere else;</div><div>in fact, hiding inherent complexity usually leads to choosing the wrong approach;</div><div><p></p></div><div>for example, references (sharing data) are problematic in two situations:</div><div>, async sharing (eg in callbacks);</div><div>, mutable sharing (eg GUI widgets put in containers);</div><div>most programming languages hide these problems behind a garbage collection, or other runtime solutions;</div><div>but the right approach is to simply avoid them;</div><div>to avoid async sharing we can use actors (discussed in the next section);</div><div>in the following we see how to avoid mutable sharing;</div><div><a href='https://manishearth.github.io/blog/2015/05/17/the-problem-with-shared-mutability/'>https://manishearth.github.io/blog/2015/05/17/the-problem-with-shared-mutability/</a></div><div><p></p></div><div>static data (functions, structs, constants): no problem, copy or share by reference;</div><div>dynamic data: fixed structure, dynamic structure;</div><div><p></p></div><div>if a data has a fixed structure we usually put it on stack;</div><div>so we don't share it across the program, we copy it;</div><div>if the data is big and we want to share it, we can put it inside a cell on the heap,</div><div>  and share references to it across the program, using &;</div><div>since the structure of data is fixed we can mutate it from anywhere (in the same tread);</div><div><p></p></div><div>but in general where the structure of data is not fixed,</div><div>  we need to check if the read_write_lock pattern is fulfilled,</div><div>  either statically (when sharing refs using &mut),</div><div>  or dynamically at runtime, by putting it inside a RefCell</div><div>    (or its multi_threaded counterparts: Mutex or RwLock);</div><div>note that if runtime rea_write_lock pattern fails, the program will panic;</div><div>this is true even for garbage collected languages,</div><div>  and can be seen in rare occasions like iteration invalidation;</div><div>  you see? inherent complexities can't be hidden completely;</div><div><p></p></div><div>a type is "Copy" if all the data it owns is part of its stack representation;</div><div>  in other words if a copy of its stack representation doesn't violate memory safety;</div><div>"&T" and raw pointers are "Copy", "&mut T" isn't "Copy" (it's "Move");</div><div><p></p></div><div>in Rust any resource have exactly one owner which takes care of its resource deallocation;</div><div>owners can share their data by lending them to references;</div><div>references must have a lifetime less than the owner;</div><div>furthermore lifetime of a mutable reference must not overlap with other references;</div><div><a href='http://blog.skylight.io/rust-means-never-having-to-close-a-socket/'>http://blog.skylight.io/rust-means-never-having-to-close-a-socket/</a></div><div><p></p></div><div>owner can:</div><div>, access and mutate resource;</div><div>, lend the resource to a reference;</div><div>, hand over ownership (move), or deallocate resource;</div><div>but during a lend, owner can't:</div><div>, mutate the resource;</div><div>, mutably lend resouce to another reference;</div><div>, hand over ownership (move), or deallocate resource;</div><div>and during a mutable lend, owner can't even access the resource;</div><div><p></p></div><div>references (shared references) can:</div><div>, access borrowed resource;</div><div>, immutably lend resource to other references;</div><div>mutable reference (exclusive reference) can:</div><div>, access and mutate resource;</div><div>, mutably lend resouce to another reference;</div><div>  they can immutably lend resource, but then they can mutate it;</div><div>  just like when an owner immutably lends its resource;</div><div><p></p></div><div>during shared borrow (immutable borrow) no one owns the data;</div><div>  so even the original owner can't change the it;</div><div>during mutable borrow the (unique) borrower owns it;</div><div>so "&mut" is actually a temporary transfer of ownership;</div><div><p></p></div><div>runtime borrow check: RefCell;</div><div>runtime memory management: Rc;</div><div>RC: shared owning (a runtime solution);</div><div>ARC: multi_threaded version;</div><div><p></p></div><div>scenarios that involve returning refs often require explicit lifetimes;</div><div>  so don't return refs, instead use mutable refs in inputs;</div><div>structs and enums containing refs must have explicit lifetimes;</div><div>  so don't use them;</div><div><p></p></div><div>s: String -&gt; &s: &String -&gt; &s[..]: &str</div><div>v: Vec&lt;T&gt; -&gt; &v: &Vec&lt;T&gt; -&gt; &v[..]: &[T]</div><div>&str and &[T] are slices; str and [T] are unsized types;</div><div>slicing is like borrowing from an unsized type;</div><div>since the the slice contains the size, the lending type itself doesn't need to have a definite size;</div><div><p></p></div><div>x = a[i] -&gt; this is possible if the elements of "a" are copy</div><div>  (cause moving out of collections is not possible);</div><div>x = &a[i] -&gt; this is for the case when the elements are not copy;</div><div>x = a[i..j] -&gt; this is always invalid;</div><div>x = &a[i..j] -&gt; slicing;</div><div><p></p></div><div>auto ref/deref for self in method calls:</div><div>  insert as many * or & as necessary to get it right;</div><div>because in method calls name and context of a method call is almost always sufficient</div><div>  to infer the move/borrow semantics;</div><div><p></p></div><div>deref coercion:</div><div>, &T -&gt; &U when T: Deref&lt;Target=U&gt;</div><div>, &mut T -&gt; &U when T: Deref&lt;Target=U&gt;</div><div>, &mut T -&gt; &mut U when T: DerefMut&lt;Target=U&gt;</div><div>examples:</div><div>  &&i32 -&gt; &i32 because &i32: Deref&lt;Target=i32&gt;</div><div>  &String -&gt; &str because String: Deref&lt;Target=str&gt;</div><div>  &Vec&lt;T&gt; -&gt; &[T] because Vec&lt;T&gt;: Deref&lt;Target=[T]&gt;</div><div><a href='https://github.com/rust-lang/rfcs/blob/master/text/0241-deref-conversions.md'>https://github.com/rust-lang/rfcs/blob/master/text/0241-deref-conversions.md</a></div><div><p></p></div><div><b>type system</b></div><div>types show us what we can do with the data, ie which operations are valid;</div><div><p></p></div><div>the class hierarchy design, eg in Java, is problematic;</div><div>  <a href='http://ptgmedia.pearsoncmg.com/images/020163371x/items/item33.html'>http://ptgmedia.pearsoncmg.com/images/020163371x/items/item33.html</a></div><div>also the problem of covariance for generic types, has its root in this problem;</div><div>  <a href='https://en.wikipedia.org/wiki/Wildcard_(Java)'>https://en.wikipedia.org/wiki/Wildcard_(Java)</a></div><div>i think this problem is also the motivation for dynamic typing (another bad design);</div><div>the right way as done in Rust, Go and Julia:</div><div>, concrete types (like final classes in Java) can be instantiated, but cannot have subtypes;</div><div>, abstract types (like abstract classes in Java) cannot be instantiated, but can have subtypes;</div><div><p></p></div><div>note that "x.m()" is method call syntax, which completely differs from "(x.m)()";</div><div><p></p></div><div>in "use" statements:</div><div>, crate_name::...</div><div>, self::local_item::...</div><div>even outside "use" statements, we can build absolute paths using crate names at the begining;</div><div>  but since it can conflict with a local name, it's better to avoid it, and instead,</div><div>  either insert a "::" at the begining, before the crate's name,</div><div>  or bring the crate's name into scope using a "use" statement;</div><div><p></p></div><div>arrays like tuples have fixed size and thus stored on stack;</div><div>  but since they are homogeneous (all elements are of the same type), they can be indexed at runtime;</div><div>vectors and hash tables are homogeneous, varying sized collections;</div><div><p></p></div><div>Rust does not have named arguments and named tuples; and it's a good thing;</div><div>when you need functions with lots of arguments, or tuples with lots of elements,</div><div>  it's a sign that you need to restructure your code, and use structs to define new types;</div><div><p></p></div><div>a closure is like an anonymous struct made of variables captured from environment,</div><div>  that is callable (implements Fn/FnMut/FnOnce trait);</div><div>so all closures are unique types, but they have traits in common;</div><div>note that if we put a generic type parameter in the return type of a fuction,</div><div>  we have to provide the concrete type when we call the function;</div><div>  thus we can't use generic type parameters to return a closure, we have to use "impl";</div><div><p></p></div><div>"fn(T1) -&gt; T2" is not an unsized type like "str", it's a function pointer;</div><div><p></p></div><div><b>actors</b></div><div>sync sharing can be checked statically;</div><div>async sharing needs runtime checking, so it's better to move/copy in async situations;</div><div><a href='https://crates.io/crates/may_actor'>https://crates.io/crates/may_actor</a></div><div><p></p></div><div>an actor can have a set of parameters which can be adjusted based on the recieved messages;</div><div>  this can be used to implement learning capabilities;</div>
<h2>3, GTK</h2><div><a href='https://mmstick.github.io/gtkrs-tutorials/introduction.html'>https://mmstick.github.io/gtkrs-tutorials/introduction.html</a></div><div><a href='https://gtk-rs.org/'>https://gtk-rs.org/</a></div><div><a href='https://gtk-rs.org/docs/gtk/'>https://gtk-rs.org/docs/gtk/</a></div><div><a href='https://github.com/gtk-rs/examples/tree/master/src/bin'>https://github.com/gtk-rs/examples/tree/master/src/bin</a></div><div><a href='http://gtk-rs.org/docs/sourceview/'>http://gtk-rs.org/docs/sourceview/</a></div><div><a href='http://gtk-rs.org/docs/gtk/trait.TextBufferExt.html#tymethod.get_text'>http://gtk-rs.org/docs/gtk/trait.TextBufferExt.html#tymethod.get_text</a></div><div><p></p></div><div>instead of callbacks, do event handling in a loop (instead of using "gtk::main()"):</div><div>  while window.get_window() != None {</div><div>    gtk::main_iteration();</div><div>    </div><div>    if let mut Some(event) = gtk::get_current_event() {</div><div>      if let keyval = event.get_keyval() {</div><div>        match keyval {</div><div>          key::space =&gt; ,</div><div>          _ =&gt; ()</div><div>        }</div><div>      }</div><div>      gtk::main_do_event(&mut event);</div><div>    }</div><div>  }</div><div><p></p></div><div>instead of container widgets, create structs that implement a trait named "Container";</div><div>  "Container" trait has a method "widget(&self)" which returns the appropriate GTK container widget;</div><div>  the structs contain elements which are a GTK widget or another struct implementing "Container";</div><div><p></p></div><div>size and location can only be determined for container widgets;</div><div>other widgets must always be put inside a container;</div><div><p></p></div><div>gradient + animation -&gt; cursor</div><div>https://developer.gnome.org/gtk3/stable/chap-css-properties.html</div><div>gtk cursor-aspect-ratio style property;</div><div>in "~/.config/gtk-3.0/gtk.css":</div><div>* {</div><div>  -GtkTextView-error-underline-color: #FC4138;</div><div>  -gtk-outline-radius: 2px; </div><div>  -GtkWidget-cursor-aspect-ratio: 1;</div><div>  -GtkTextView-cursor_aspect_ratio: 1;</div><div>  -EelEditableLabe-cursor_aspect_ratio: 1;</div><div>  -GtkWidget-focus-line-width: 3;</div><div>}</div><div>https://superuser.com/questions/1365329/how-do-i-make-the-focus-rectangle-in-gtk3-more-prominent</div><div>https://github.com/xi/gtk-theme-clearcodes/tree/master/gtk-3.0</div><div>draw arrow at cursor position in TextView in GTK3:</div><div>  https://gist.github.com/musiKk/2266946</div><div><p></p></div><div>https://wiki.archlinux.org/index.php/Udisks#udevadm_monitor</div><div><p></p></div><div><a href='https://crates.io/crates/webkit2gtk'>https://crates.io/crates/webkit2gtk</a></div><div>pdf.js</div><div><p></p></div><div>for gallery view: gtk::FlowBox, gtk::Scrollable</div><div>gstreamer, gstreamer_player</div><div>https://slomo.pages.freedesktop.org/rustdocs/gstreamer/gstreamer/</div><div>https://gitlab.freedesktop.org/gstreamer/gstreamer-rs/tree/master/examples</div><div>https://gitlab.freedesktop.org/gstreamer/gstreamer-rs/tree/master/tutorials</div><div>https://gstreamer.freedesktop.org/documentation/</div><div>gtkglsink, gtksink:</div><div>  https://stackoverflow.com/a/32695253</div><div>  https://stackoverflow.com/a/39173641</div><div>  https://riptutorial.com/gtk3/example/24777/embed-a-video-in-a-gtk-window-in-python3</div><div>  https://wiki.gnome.org/Projects/Vala/GStreamerSample</div><div><p></p></div><div>gspell</div><div><p></p></div><div>multi_threaded gui (which is not possible with GTK) can be acheived using actor widgets;</div><div>ie containers will be made of actor widgets;</div>
<h2>4, graphics</h2><div>software rendering gives us a lot more flexibility,</div><div>  because we are not any more limited by a hardware implementation,</div><div>  with triangle only rasterization, isolated shader programs, and fixed size buffers;</div><div>the benefits of GPUs can be compensated using SIMD;</div><div><p></p></div><div>graphical objects are made of primitives;</div><div>  each primitive has a specific algorithm for rasterization;</div><div>2d primitives: point, line, curve, triangle, curved area;</div><div>3d objects made of flat surfaces will be broken up into triangles;</div><div>3d objects made of curved surfaces can be broken up into a number of primitive 3d surfaces,</div><div>  which can be easily projected to 2d;</div><div><a href='https://en.wikipedia.org/wiki/Quadric'>https://en.wikipedia.org/wiki/Quadric</a></div><div>also interpolation is a good method for amorphous surfaces;</div><div><p></p></div><div>2d objects will be rasterized into pixels (a pixel is a coordinate plus a color value);</div><div>then these rasterized objects will be drawn in the framebuffer,</div><div>  in layers over each other (in an overlay on top of all 3d objects);</div><div>rasterizing 3d objects, produces an array of fragments;</div><div>  a fragment, besides color, contains a normal and a depth;</div><div>when creating the pixels of the framebuffer from the fragments,</div><div>  the normals are used for lighting, and the depths are used for z_buffer;</div><div><p></p></div><div>graphical objects are of 2 kinds:</div><div>, those which we know will remain unchanged the next time we want to draw to the framebuffer;</div><div>  these objects are first rasterized into memory, then we copy it into framebuffer;</div><div>, those which we know will be changed (scaled, rotated, moved in z direction)</div><div>  the next time we want to draw to the framebuffer</div><div>    (which happens a lot for animations with high frame rate);</div><div>  these objects will be drawn directly to the framebuffer;</div><div>(framebuffer uses double buffering and v_sync;)</div><div>note that if an object just moves in x_y plane (without rotation),</div><div>  the cached rasterization is still useful;</div><div>  for 2d objects we simply add a constant to the position of all pixels;</div><div>  for 3d objects we may additionally want to recompute the lighting of pixels from fragments;</div><div><p></p></div><div>data structure for graphical objects:</div><div>, primitives</div><div>, material</div><div>, cached rasterization (can be none)</div><div><p></p></div><div><a href='https://github.com/google/font-rs'>https://github.com/google/font-rs</a></div><div><a href='https://docs.rs/rusterize/'>https://docs.rs/rusterize/</a></div><div><a href='https://docs.rs/softrender/'>https://docs.rs/softrender/</a></div><div><a href='https://crates.io/crates/line_drawing'>https://crates.io/crates/line_drawing</a></div><div><a href='https://crates.io/crates/barg'>https://crates.io/crates/barg</a></div><div><a href='https://www.siggraph.org/education/materials/HyperGraph/scanline/outprims/drawline.htm'>https://www.siggraph.org/education/materials/HyperGraph/scanline/outprims/drawline.htm</a></div><div><a href='https://en.wikipedia.org/wiki/Midpoint_circle_algorithm'>https://en.wikipedia.org/wiki/Midpoint_circle_algorithm</a></div><div><a href='https://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm'>https://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm</a></div><div><a href='http://members.chello.at/~easyfilter/bresenham.html'>http://members.chello.at/~easyfilter/bresenham.html</a></div><div><a href='https://nothings.org/gamedev/rasterize/'>https://nothings.org/gamedev/rasterize/</a></div><div><a href='https://magcius.github.io/xplain/article/'>https://magcius.github.io/xplain/article/</a></div><div><a href='https://en.wikipedia.org/wiki/Stencil_buffer'>https://en.wikipedia.org/wiki/Stencil_buffer</a></div><div><a href='https://www.scratchapixel.com'>https://www.scratchapixel.com</a></div><div><a href='https://www.scratchapixel.com/lessons/3d-basic-rendering/phong-shader-BRDF'>https://www.scratchapixel.com/lessons/3d-basic-rendering/phong-shader-BRDF</a></div><div><p></p></div><div>monospace fonts:</div><div>  wide characters are forced to squeeze;</div><div>  narrow characters are forced to stretch;</div><div>  uppercase letters look skinny next to lowercase;</div><div>  bold characters don’t have enough room;</div><div>proportional font for code:</div><div>  generous spacing</div><div>  large punctuation</div><div>  and easily distinguishable characters</div><div>  while allowing each character to take up the space that it needs</div><div><a href='http://input.fontbureau.com/info/'>http://input.fontbureau.com/info/</a></div><div>two spaces -&gt; elastic blocks</div><div><a href='http://nickgravgaard.com/elastic-tabstops/'>http://nickgravgaard.com/elastic-tabstops/</a></div>
<h2>5, Arch Linux</h2><div>Arch Linux provides a shared_library distribution system,</div><div>  which is simple and effective,</div><div>  and is very close to the original build process;</div><div><p></p></div><div>first boot to an existing Arch Linux (the live image,</div><div>  or an already installed Arch Linux with arch-install-scripts package installed);</div><div>; timedatectl set-ntp true</div><div><p></p></div><div>list disks using "fdisk -l"; then use "fdisk /dev/sdx" to create 3 partitions:</div><div>  , +1M BIOS boot (partition type code: 4)</div><div>  , +550M EFI System (partition tye code: 1)</div><div>  , and the rest for Linux filesystem</div><div>  (first enter "g" command to create a GPT partition table,</div><div>    then enter "n" to add a new partition, and change its type using "t" command;</div><div>    at the end enter "w" to write and exit;)</div><div>format the partitions:</div><div>  ; mkfs.fat -F32 /dev/sdx2; mkfs.ext4 /dev/sdx3</div><div><p></p></div><div>; mount /dev/sdx3 /mnt</div><div>now to reuse previously downloaded packages on your system,</div><div>  and to prevent them from being downloaded again,</div><div>  you can copy them to "/mnt/var/cache/pacman/pkg";</div><div>; pacstrap /mnt pacman</div><div>; arch-chroot /mnt</div><div>; pacman -S grub sed intel-ucode linux systemd-sysvcompat logrotate \</div><div>  networkmanager pulseaudio-alsa udisks2 sudo nano man-db unzip ttf-hack ttf-droid sway \</div><div>  gtk3 gtksourceview3 webkit2gtk gst-plugins-{base,good,bad} gst-libav materia-gtk-theme \</div><div>  rustup</div><div><p></p></div><div>install bootloader:</div><div>; grub-install --target=i386-pc /dev/sdx</div><div>; mkdir /boot/efi; mount /dev/sdx2 /boot/efi</div><div>; grub-install --target=x86_64-efi --efi-directory=/boot/efi --removable</div><div>; grub-mkconfig -o /boot/grub/grub.cfg</div><div>; nano /boot/grub/grub.cfg</div><div>  set timeout = 0</div><div><p></p></div><div>create user:</div><div>; useradd -m -G wheel user1</div><div>; passwd -d user1</div><div>; EDITOR=nano visudo</div><div>  %wheel ALL=(ALL) ALL</div><div>i know that having sudo without password has no security advantage over just using root;</div><div>but a regular user is necessary, because</div><div>  some programs (like PulseAudio) wouldn't work normally when run as root;</div><div><p></p></div><div>automatic login:</div><div>; mkdir /etc/systemd/system/getty@tty1.service.d</div><div>; nano /etc/systemd/system/getty@tty1.service.d/override.conf</div><div>  [Service]</div><div>  ExecStart=</div><div>  ExecStart=-/usr/bin/agetty --autologin user1 --noclear %I $TERM</div><div><p></p></div><div>; nano /etc/locale.gen</div><div>  en_US.UTF-8 UTF-8</div><div>; locale-gen</div><div>; nano /etc/locale.conf</div><div>  LANG=en_US.UTF-8</div><div><p></p></div><div>; systemctl enable NetworkManager.service</div><div>; systemctl enable systemd-timesyncd.service</div><div>; exit</div><div>; reboot</div><div><p></p></div><div>; mkdir -p ~/.config/gtk-3.0; nano ~/.config/gtk-3.0/settings.ini</div><div>  [Settings]</div><div>  gtk-theme-name = Materia-light-compact</div><div>  gtk-font-name = Sans</div><div><p></p></div><div>for devices with hardware mute and volume control,</div><div>  PulseAudio mutes and silences them by default;</div><div>so if you like you can do this:</div><div>; pactl set-sink-mute @DEFAULT_SINK@ 0</div><div>; pactl set-sink-volume @DEFAULT_SINK@ 100%</div><div><p></p></div><div>; rustup gcc</div><div>; rustup install stable</div><div>; rustup default stable</div><div><p></p></div><div>; nano ~/.bash_profile</div><div>  export TZ="/usr/share/zoneinfo/&lt;your_location&gt;"</div><div>  sway</div><div>; mkdir -p ~/.config/sway</div><div>; nano ~/.config/sway/config</div><div>  default_border none</div><div>  exec "cargo run --release --manifest-path comshell-Cargo.toml-path; swaymsg exit"</div><div><p></p></div><div>actually Sway (with "wlroot") is not ready yet;</div><div>  so til then, we can use "i3-wm";</div><div>; pacman -S xorg-server xorg-xinit xf86-video-{intel,nouveau,amdgpu} compton i3-wm</div><div>; nano ~/.bash_profile</div><div>  export TZ="/usr/share/zoneinfo/&lt;your_location&gt;"</div><div>  startx</div><div>; nano ~/.xinitrc</div><div>  exec i3</div><div>; mkdir -p ~/.config/i3</div><div>; nano ~/.config/i3/config</div><div>  # i3 config file (v4)</div><div>  default_border none</div><div>  exec compton --shadow-exclude "class_g %= '*'" --unredir-if-possible-exclude "class_g %= '*'"</div><div>  exec --no-startup-id "cargo run --release --manifest-path comshell-Cargo.toml-path; i3-msg exit"</div>
<h2>URL</h2><div><a href='https://github.com/damoonsaghian/Comshell'>https://github.com/damoonsaghian/Comshell</a></div><div>this project is public domain;</div></body></html>