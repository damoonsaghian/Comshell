<!DOCTYPE html>
<html>
<head><link href="style.css" rel="stylesheet"></head>
<body><script>

const path = require('path');
const projectsList = require('./projects-list');
const projectFiles = require('./project-files');

const win = nw.Window.get();
win.maximize();

// for each user data directory, there can only be one instance of NW app;
// if we try to open a second instance, the first one will be notified with "open" signal;
// we use the signal to focus the window;
nw.App.on('open', _args => win.focus());

const args = nw.App.fullArgv;
const index = args.indexOf('--user-data-dir') + 1;
const userDataDir = index === 0 ? null : args[index]; // nw.App.dataPath
const projectDir = userDataDir ? path.join(userDataDir, '../..') : null;

if (projectDir) {
  projectFiles.initialize(userDataDir);
} else {
  projectsList.showModal();
}

</script></body>
</html>
